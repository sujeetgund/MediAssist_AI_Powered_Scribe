<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MediAssist by Sneh Thakkar — Clinical AI Assistant</title>

	<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<!-- favicon to avoid broken icon shown by browser -->
	<link rel="icon" href="{{ url_for('static', filename='img/hospital-plus.svg') }}" type="image/svg+xml">
</head>
<body>

<nav class="navbar navbar-expand-lg sticky-top">
	<div class="container">
		<a class="navbar-brand brand d-flex align-items-center" href="#">
			<span class="brand-icon me-2" aria-hidden="true" title="MediAssist logo">
				<!-- inline SVG (keeps crisp rendering and removes external-image problems) -->
				<svg width="62" height="62" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true" focusable="false">
					<defs>
						<linearGradient id="G" x1="0" x2="1" y1="0" y2="1">
							<stop offset="0%" stop-color="#ff3b30"/>
							<stop offset="45%" stop-color="#ff7a59"/>
							<stop offset="100%" stop-color="#8a3ffc"/>
						</linearGradient>
						<filter id="innerGlow" x="-50%" y="-50%" width="200%" height="200%">
							<feGaussianBlur stdDeviation="2.2" result="blur"/>
							<feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
						</filter>
					</defs>
					<rect x="8" y="8" width="84" height="84" rx="14" ry="14" fill="url(#G)" opacity="0.98"/>
					<g filter="url(#innerGlow)">
						<path fill="#fff" d="M55 30H45v15H30v10h15v15h10V55h15V45H55z"/>
					</g>
				</svg>
			</span>
			<span class="brand-text">MediAssist <small class="text-muted">by Sneh Thakkar</small></span>
		</a>
		<div class="d-none d-lg-block ms-auto small-muted">One-page clinical assistant • Not a replacement for clinical judgement</div>
	</div>
</nav>

<div class="container my-5">
	<div class="row g-4">
		<div class="col-lg-12">
			<!-- simplified title / hero — removed status banner -->
			<div class="hero d-flex flex-column flex-md-row align-items-start justify-content-between">
				<div>
					<h1 class="mb-1">MediAssist — Clinical AI Assistant</h1>
					<p class="lead mb-0 small-muted">Concise clinical summaries and suggested treatment plans. Educational prototype — not a substitute for clinical judgement.</p>
				</div>
				<div class="text-end d-none d-sm-block ms-3"></div>
			</div>
		</div>

		<!-- centered single-column layout for the intake form -->
		<div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1">
			<div class="form-card">
				<h4 class="mb-3 title-with-icon"><i class="fas fa-notes-medical me-2 icon-muted"></i>Patient Intake</h4>

				<form id="intake" action="/diagnose" method="POST" novalidate>
					<!-- Row 1 -->
					<div class="row g-3">
						<div class="col-sm-6">
							<label class="form-label">Full name</label>
							<input type="text" name="name" class="form-control" placeholder="e.g., Priya Patel">
						</div>
						<div class="col-sm-3">
							<label class="form-label">Age <span class="req">*</span></label>
							<input type="number" name="age" class="form-control" placeholder="Years" min="0" required>
						</div>
						<div class="col-sm-3">
							<label class="form-label">Gender</label>
							<select name="gender" class="form-select">
								<option>Prefer not to say</option>
								<option>Female</option>
								<option>Male</option>
								<option>Other</option>
							</select>
						</div>

						<!-- Row 2 -->
						<div class="col-sm-4">
							<label class="form-label">Weight (kg)</label>
							<input type="number" step="0.1" name="weight" class="form-control" placeholder="e.g., 68">
						</div>
						<div class="col-sm-4">
							<label class="form-label">Height (cm)</label>
							<input type="number" step="0.1" name="height" class="form-control" placeholder="e.g., 170">
						</div>
						<div class="col-sm-4">
							<label class="form-label">Temperature (°C)</label>
							<input type="number" step="0.1" name="temperature" class="form-control" placeholder="e.g., 38.2">
						</div>

						<!-- Row 3 -->
						<div class="col-6">
							<label class="form-label">Blood Pressure (optional)</label>
							<input type="text" name="blood_pressure" class="form-control" placeholder="e.g., 120/80">
						</div>
						<div class="col-6">
							<label class="form-label">Symptom onset / duration <span class="req">*</span></label>
							<input type="text" name="duration" class="form-control" placeholder="e.g., 3 days, sudden" required>
						</div>

						<!-- Row 4 -->
						<div class="col-md-6">
							<label class="form-label">Allergies <span class="req">*</span></label>
							<input type="text" name="allergies" class="form-control" placeholder="e.g., Penicillin, NKDA" required>
						</div>
						<div class="col-md-6">
							<label class="form-label">Current medications <span class="req">*</span></label>
							<input type="text" name="current_medications" class="form-control" placeholder="e.g., Metformin 500mg, Lisinopril 5mg" required>
						</div>

						<!-- Row 5 -->
						<div class="col-12">
							<label class="form-label">Past medical history (brief)</label>
							<input type="text" name="medical_history" class="form-control" placeholder="e.g., Asthma, Type-2 diabetes, surgeries">
						</div>

						<!-- Row 6 -->
						<div class="col-12">
							<label class="form-label">Severity</label>
							<select name="severity" class="form-select">
								<option>Mild</option>
								<option selected>Moderate</option>
								<option>Severe</option>
							</select>
						</div>

						<div class="col-12">
							<label class="form-label">Clinical Symptoms <span class="req">*</span></label>
							<textarea name="symptoms" class="form-control" rows="5" placeholder="Describe the symptoms in detail... (e.g., high fever, severe headache, nausea) — include red flags you noticed" required></textarea>
							<div class="small-muted mt-1">Try to be as specific as possible — this improves suggestions.</div>
						</div>

						<div class="col-12">
							<label class="form-label">Any other notes (exposures, recent travel, COVID status)</label>
							<input type="text" name="other_notes" class="form-control" placeholder="optional">
						</div>

						<div class="col-12">
							<div class="form-check">
								<input class="form-check-input" type="checkbox" value="1" id="confirm" name="confirm" required>
								<label class="form-check-label small-muted" for="confirm">I confirm the information above is accurate to the best of my knowledge. I understand this is an AI-run prototype and not a definitive medical diagnosis.</label>
							</div>
						</div>

						<div class="col-12 text-center mt-3">
							<button id="submitBtn" type="submit" class="btn-medical btn w-100">
								<span id="btnLabel"><i class="fas fa-stethoscope me-2"></i>Analyze & Generate Plan</span>
								<span id="btnSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
							</button>
						</div>

						<div class="col-12 small-muted text-center mt-3">
							<small><strong>Note:</strong> For safety, allergies & current medications are required to provide prescriptions.</small>
						</div>
					</div>
				</form>
			</div>

			<!-- error (AJAX) shown below form -->
			<div id="errorArea" class="mt-4" aria-live="polite" role="status"></div>
		</div>

		<!-- results row: patient summary and AI assessment stacked under the form -->
		<div class="col-12">
			<div class="stacked-results mt-4">
				<div id="patientSummaryContainer"></div>
				<div id="aiResultContainer">
					<div class="result-box small-muted">
						<h6 class="text-muted"><i class="fas fa-info-circle me-2"></i> How it works</h6>
						<p class="mb-0">Fill the intake above and confirm. MediAssist will generate a patient-friendly explanation and a suggested treatment plan. This is educational only.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="footer mt-5">
		<hr>
		<small>MediAssist by Sneh Thakkar • Prototype / Educational use only • <em>Do not use for emergencies</em></small>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/app.js') }}"></script>

</body>
</html>